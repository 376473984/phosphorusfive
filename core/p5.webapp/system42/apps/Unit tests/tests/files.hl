
/*
 * Unit tests for everything related to files.
 */


Save and load single file
  save-file:~/temp/foo.txt
    src:Foo bar
  load-file:~/temp/foo.txt
  if:x:/@load-file/*?value
    !=:Foo bar
    throw:Assert error, p5.io misbehaved


Delete single file
  save-file:~/temp/bar.txt
    src:Bar was here
  delete-file:~/temp/bar.txt
  if
    fetch:x:/0/0?value
      file-exist:~/temp/bar.txt
    throw:Assert error, p5.io misbehaved


Deleting multiple files
  save-file:~/temp/bar1.txt
    src:Bar1 was here
  save-file:~/temp/bar2.txt
    src:Bar2 was here
  delete-file:x:/../*/save-file?value
  if
    fetch:x:/0/0?value
      file-exist:~/temp/bar1.txt
    or
      fetch:x:/0/0?value
        file-exist:~/temp/bar2.txt
    throw:Assert error, p5.io misbehaved


Copy a single file
  save-file:~/temp/foo.txt
    src:Foo bar
  if
    fetch:x:/0/0?value
      file-exist:~/temp/foo-copy.txt
    delete-file:~/temp/foo-copy.txt
  copy-file:~/temp/foo.txt
    dest:~/temp/foo-copy.txt
  load-file:~/temp/foo-copy.txt
  if:x:/@load-file/*?value
    !=:Foo bar
    throw:Assert error, p5.io misbehaved


Copy multiple files with expression
  save-file:~/temp/foo-1.txt
    src:Foo bar 1
  save-file:~/temp/foo-2.txt
    src:Foo bar 2
  if
    fetch:x:/0/0?value
      folder-exist:~/temp/new/
    delete-folder:~/temp/new/
  create-folder:~/temp/new/
  copy-file:x:/../*/save-file?value
    dest:~/temp/new/
  load-file:x:/../*/save-file?value
  if:x:/@load-file/0?value
    !=:Foo bar 1
    or:x:/@load-file/1?value
      !=:Foo bar 2
    throw:Assert error, p5.io misbehaved


Move a single file
  save-file:~/temp/foo-orig.txt
    src:Foo bar
  if
    fetch:x:/0/0?value
      file-exist:~/temp/foo-dest.txt
    delete-file:~/temp/foo-dest.txt
  move-file:~/temp/foo-orig.txt
    dest:~/temp/foo-dest.txt
  load-file:~/temp/foo-dest.txt
  if:x:/@load-file/*?value
    !=:Foo bar
    or
      fetch:x:/0/0?value
        file-exist:~/temp/foo-orig.txt
    throw:Assert error, p5.io misbehaved


Rename a single file
  save-file:~/temp/foo-orig.txt
    src:Foo bar
  if
    fetch:x:/0/0?value
      file-exist:~/temp/foo-dest.txt
    delete-file:~/temp/foo-dest.txt
  rename-file:~/temp/foo-orig.txt
    dest:~/temp/foo-dest.txt
  load-file:~/temp/foo-dest.txt
  if:x:/@load-file/*?value
    !=:Foo bar
    or
      fetch:x:/0/0?value
        file-exist:~/temp/foo-orig.txt
    throw:Assert error, p5.io misbehaved

