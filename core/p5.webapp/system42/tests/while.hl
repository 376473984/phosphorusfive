/*
 * Contains unit tests for testing [while] in system
 */

/*
 * Tests that [while] behaves as expected when condition
 * is existence of node
 */
node-exist
  _input
    foo1
    foo2
    foo3
  _output
  while:x:/../*/_input/0
    add:x:/../*/_output
      src:x:/../*/_input/0
    set:x:/../*/_input/0
  if:x:/../*/_input/0
    or:x:/../*/_output/*?count
      !=:int:3
    throw:@"Assert error, [while] misbehaved!"

/*
 * Tests that [while] behaves as expected when condition
 * is that integer value is not 0
 */
integer-comparison
  _result
  _int:int:5
  while:x:/../*/_int?value
    !=:int:0
    set:x:/../*/_result?value
      src:{0}*
        :x:/../*/_result?value
    set:x:/../*/_int?value
      -:x:/../*/_int?value
        _:int:1
  if:x:/../*/_result?value
    !=:*****
    or:x:/../*/_int?value
      !=:int:0
    throw:@"Assert error, [while] misbehaved!"
